server {
  listen 80;
  server_name _;

  # 静的ファイル: /static/ 以下
  location /static/ {
    alias /usr/share/nginx/html/static/;
    autoindex off;
    add_header Cache-Control "public, max-age=300";
  }

  # それ以外はアプリへ（/search, /ask, /batch-ask, /feedback, /health）
  location / {
    proxy_pass         http://app:8010;
    proxy_http_version 1.1;
    proxy_set_header   Host              $host;
    proxy_set_header   X-Real-IP         $remote_addr;
    proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;
    proxy_set_header   X-Forwarded-Proto $scheme;
  }

  # 明示的にルートでUIを出したい場合は、下を有効化（index.html を最初に開く）
  # location = / {
  #   return 302 /static/index.html;
  # }
}
